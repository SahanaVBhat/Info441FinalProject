{"ast":null,"code":"import _regeneratorRuntime from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chris-yee/Desktop/Info441FinalProject/clients/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chris-yee/Desktop/Info441FinalProject/clients/src/Components/Home.js\";\nimport React, { Component } from \"react\";\nimport \"../Styles/App.css\";\nimport api from './../Constants/APIEndpoints/APIEndpoints';\nimport Errors from './Errors/Errors';\nimport Footer from \"./Footer\";\nimport CardList from \"./CardList\";\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  // submitForm = async (e) => {\n  //   e.preventDefault();\n  //   const { email, password } = this.state;\n  //   const sendData = { email, password };\n  //   const response = await fetch(api.base + api.handlers.sessions, {\n  //     method: \"POST\",\n  //     body: JSON.stringify(sendData),\n  //     headers: new Headers({\n  //       \"Content-Type\": \"application/json\"\n  //     })\n  //   });\n  //   if (response.status >= 300) {\n  //     const error = await response.text();\n  //     this.setError(error);\n  //     return;\n  //   }\n  // }\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.setError = function (error) {\n      _this.setState({\n        error: error\n      });\n    };\n\n    _this.getInfo =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var courseCode, response, error, courses;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              courseCode = _this.state.courseCode; //const sendData = { courseCode };\n\n              _context.next = 3;\n              return fetch(api.base + api.handlers.courses + '?code=' + courseCode, {\n                method: \"GET\"\n              });\n\n            case 3:\n              response = _context.sent;\n\n              if (!(response.status >= 300)) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 7;\n              return response.text();\n\n            case 7:\n              error = _context.sent;\n\n              _this.setError(error);\n\n              return _context.abrupt(\"return\");\n\n            case 10:\n              _context.next = 12;\n              return response.json();\n\n            case 12:\n              courses = _context.sent;\n\n              if (courses.length > 1) {\n                _this.setState({\n                  results: [courses[0].id, courses[0].code, courses[0].title, courses[0].description]\n                });\n\n                _this.setError(\"\");\n              } else {\n                _this.setState({\n                  results: [\"no results\"]\n                });\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.handleInputChange = function () {\n      _this.setState({\n        courseCode: _this.search.value\n      }, function () {\n        _this.getInfo(); // if (this.state.courseCode && this.state.courseCode.length > 1) {\n        //   if (this.state.courseCode.length % 2 === 0) {\n        //     this.getInfo()\n        //   }\n        // }\n\n      });\n    };\n\n    _this.state = {\n      courseCode: \"\",\n      results: [],\n      error: \"\"\n    };\n    return _this;\n  }\n  /**\n   * @description setError sets the error message\n   */\n\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var error = this.state.error;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card mb-3 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Find Course Evaluations\")), React.createElement(\"div\", {\n        class: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"searchBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        class: \"btn btn-lg \",\n        id: \"textInput\",\n        placeholder: \"e.g. INFO, INFO441...\",\n        ref: function ref(input) {\n          return _this2.search = input;\n        },\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Search\"))), React.createElement(Errors, {\n        error: error,\n        setError: this.setError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        style: {\n          verticalAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"main\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(CardList, {\n        classInfo: this.state.results,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })))), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/chris-yee/Desktop/Info441FinalProject/clients/src/Components/Home.js"],"names":["React","Component","api","Errors","Footer","CardList","Home","props","setError","error","setState","getInfo","courseCode","state","fetch","base","handlers","courses","method","response","status","text","json","length","results","id","code","title","description","handleInputChange","search","value","input","verticalAlign"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../Styles/App.css\";\nimport api from './../Constants/APIEndpoints/APIEndpoints';\nimport Errors from './Errors/Errors';\nimport Footer from \"./Footer\";\nimport CardList from \"./CardList\";\n\nclass Home extends Component {\n  // submitForm = async (e) => {\n  //   e.preventDefault();\n  //   const { email, password } = this.state;\n  //   const sendData = { email, password };\n  //   const response = await fetch(api.base + api.handlers.sessions, {\n  //     method: \"POST\",\n  //     body: JSON.stringify(sendData),\n  //     headers: new Headers({\n  //       \"Content-Type\": \"application/json\"\n  //     })\n  //   });\n  //   if (response.status >= 300) {\n  //     const error = await response.text();\n  //     this.setError(error);\n  //     return;\n  //   }\n  // }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      courseCode: \"\",\n      results: [],\n      error: \"\"\n    };\n  }\n\n\n  /**\n   * @description setError sets the error message\n   */\n  setError = (error) => {\n      this.setState({ error })\n  }\n\n  // GET /v1/courses?code=\n  getInfo = async () => {\n    const courseCode = this.state.courseCode;\n    //const sendData = { courseCode };\n    const response = await fetch(api.base + api.handlers.courses + '?code=' + courseCode, {\n      method: \"GET\",\n    });\n    if (response.status >= 300) {\n      const error = await response.text();\n      this.setError(error);\n      return;\n    }\n    const courses = await response.json();\n    if (courses.length > 1) {  \n      this.setState({\n        results: [courses[0].id, courses[0].code, courses[0].title, courses[0].description]\n      })\n      this.setError(\"\");\n    } else {\n      this.setState({\n        results: [\"no results\"]\n      })\n    }\n  }\n\n  handleInputChange = () => {\n    this.setState({\n      courseCode: this.search.value\n    }, () => {\n      this.getInfo()\n      // if (this.state.courseCode && this.state.courseCode.length > 1) {\n      //   if (this.state.courseCode.length % 2 === 0) {\n      //     this.getInfo()\n      //   }\n      // }\n    })\n  }\n\n\n  render() {\n    const { error } = this.state;\n    return (\n      <div>\n        <div>\n          <div class=\"card mb-3 text-center\">\n            <div class=\"card-header\">\n              <h1>Find Course Evaluations</h1>\n            </div>\n            <div class=\"card-body\">\n              <form >\n                <div class=\"searchBar\">\n                  <input type=\"text\" class=\"btn btn-lg \" id=\"textInput\"\n                    placeholder=\"e.g. INFO, INFO441...\"\n                    ref={input => this.search = input}\n                    onChange={this.handleInputChange}\n                  />\n                  <button type=\"button\" class=\"btn btn-lg\">Search</button>\n                </div>\n              </form>\n              <Errors error={error} setError={this.setError} />\n            </div>\n          </div>\n          <div style={{ verticalAlign: \"center\" }}>\n            <main>\n              <div>\n                <section>\n                  <CardList classInfo={this.state.results}/>\n                </section>\n              </div>\n            </main>\n            <Footer />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}